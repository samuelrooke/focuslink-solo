/* === THEMES & ROOT VARIABLES === */
:root, [data-theme="default"] {
    --primary: #667eea;
    --secondary: #764ba2;
    --bg: #f0f2f5;
    --card-bg: #ffffff;
    --text: #333;
    --text-muted: #666;
    --border: #e0e0e0;
    --shadow: rgba(0, 0, 0, 0.05);
    --progress-bg: #e0e0e0;
    --progress-fill: var(--primary);
    --transition: 0.3s ease;
}

[data-theme="forest"] {
    --primary: #4CAF50;
    --secondary: #2E7D32;
    --bg: #F1F8E9;
    --card-bg: #FFFFFF;
    --text: #1B5E20;
    --progress-fill: var(--primary);
}

[data-theme="ocean"] {
    --primary: #03A9F4;
    --secondary: #0288D1;
    --bg: #E1F5FE;
    --card-bg: #FFFFFF;
    --text: #01579B;
    --progress-fill: var(--primary);
}

[data-theme="matrix"] {
    --primary: #4CAF50;
    --secondary: #66BB6A;
    --bg: #121212;
    --card-bg: #1E1E1E;
    --text: #00FF41;
    --text-muted: #888;
    --border: #333;
    --shadow: rgba(0, 255, 65, 0.1);
    --progress-bg: #333;
    --progress-fill: var(--text);
}


/* === GENERAL & LAYOUT === */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--bg);
    color: var(--text);
    display: flex;
    justify-content: center;
    padding: 20px;
    transition: background-color var(--transition), color var(--transition);
}
.container { max-width: 500px; width: 100%; display: grid; gap: 1.5rem; }
.card {
    background-color: var(--card-bg);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 4px 20px var(--shadow);
    border: 1px solid var(--border);
    transition: background-color var(--transition), border-color var(--transition);
}
.visually-hidden { position: absolute; width: 1px; height: 1px; margin: -1px; padding: 0; overflow: hidden; clip: rect(0, 0, 0, 0); border: 0; }

/* === HEADER === */
.header { display: flex; justify-content: space-between; align-items: center; }
.header h1 { color: var(--primary); font-size: 1.75rem; }

/* === TIMER SECTION === */
.timer-section { text-align: center; }
.session-info { font-size: 1.25rem; font-weight: 500; color: var(--text-muted); margin-bottom: 0.5rem; }
.timer-display { font-size: 5rem; font-weight: 700; font-family: 'Courier New', monospace; user-select: none; color: var(--primary); }
.progress-circle { margin: 1rem auto; transform: rotate(-90deg); }
.progress-background { stroke: var(--progress-bg); stroke-width: 6; fill: none; }
.progress-foreground { stroke: var(--progress-fill); stroke-width: 6; fill: none; stroke-dasharray: 283; transition: stroke-dashoffset 0.5s linear, stroke var(--transition); }
.controls { display: flex; justify-content: center; gap: 1rem; margin-top: 1rem; }

/* === TASKS SECTION === */
#active-task-display { font-weight: 500; color: var(--primary); margin-bottom: 0.75rem; min-height: 24px; }
.task-input-group { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
#task-list { list-style: none; max-height: 150px; overflow-y: auto; }
#task-list li { padding: 0.75rem; background-color: var(--bg); border-radius: 8px; margin-bottom: 0.5rem; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
#task-list li.completed { text-decoration: line-through; opacity: 0.6; }
#task-list li.active { box-shadow: 0 0 0 2px var(--primary); }

/* === PRODUCTIVITY & STATS === */
.daily-goal { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
.stats-chart h3 { text-align: center; margin-bottom: 1rem; color: var(--text-muted); }
.chart-wrapper { display: flex; justify-content: space-around; align-items: flex-end; height: 120px; border-left: 2px solid var(--border); border-bottom: 2px solid var(--border); padding-left: 0.5rem; }
.chart-bar { width: 30px; background-color: var(--primary); text-align: center; color: var(--card-bg); font-weight: 600; transition: height 0.5s ease-out, background-color var(--transition); position: relative; }
.chart-bar .label { position: absolute; bottom: -25px; width: 100%; left: 0; font-size: 0.8rem; color: var(--text-muted); }
.chart-bar .count { font-size: 0.9rem; padding-top: 5px; }


/* === SETTINGS & SOUNDS === */
.settings-grid { display: grid; grid-template-columns: 1fr auto; gap: 1rem; align-items: center; margin-bottom: 1.5rem; }
.sound-settings { display: flex; justify-content: space-between; align-items: center; gap: 1rem; flex-wrap: wrap; }
.notification-sound, .ambient-sound { display: flex; align-items: center; gap: 0.5rem; }

/* === SHARED ELEMENTS: BUTTONS, INPUTS, SELECTS === */
button { background: var(--primary); color: white; border: none; border-radius: 8px; padding: 10px 20px; font-weight: 600; cursor: pointer; transition: background-color var(--transition), transform 0.2s; }
button:hover { filter: brightness(1.1); }
button:active { transform: scale(0.98); }
.controls button { padding: 12px 24px; font-size: 1.1rem; }
input[type="text"], input[type="number"], select {
    width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border); background-color: var(--bg); color: var(--text); font-size: 1rem;
    transition: background-color var(--transition), border-color var(--transition), color var(--transition);
}
input:focus, select:focus { outline: none; border-color: var(--primary); }
input[type="number"] { width: 70px; }

/* === FOOTER === */
.footer { text-align: center; color: var(--text-muted); font-size: 0.9rem; }